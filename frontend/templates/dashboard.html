<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SectorPulse - Real-Time Multi-Sector Intelligence</title>
    
    <!-- Globe.gl Library -->
    <script src="https://unpkg.com/globe.gl"></script>
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loader"></div>
        <div class="loading-text">Loading Multi-Sector Intelligence...</div>
    </div>

    <!-- Top Bar -->
    <div class="top-bar">
        <div class="logo-section">
            <div class="logo"></div>
            <div class="brand-name">SectorPulse</div>
        </div>

        <!-- SECTOR TABS - NEW! -->
        <div class="sector-tabs" id="sectorTabs">
            <button class="sector-tab active" data-sector="finance">
                <span class="sector-icon">üí∞</span>
                <span class="sector-name">Finance</span>
            </button>
            <button class="sector-tab" data-sector="health">
                <span class="sector-icon">üè•</span>
                <span class="sector-name">Health</span>
            </button>
            <button class="sector-tab" data-sector="technology">
                <span class="sector-icon">üíª</span>
                <span class="sector-name">Technology</span>
            </button>
            <button class="sector-tab" data-sector="sports">
                <span class="sector-icon">‚öΩ</span>
                <span class="sector-name">Sports</span>
            </button>
        </div>

        <div class="emotion-stats" id="emotionStats">
            <!-- Populated by dashboard.js -->
        </div>

        <div class="status-section">
            <button class="refresh-btn" id="refreshBtn" title="Refresh data">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/>
                </svg>
            </button>
            <div class="live-indicator">
                <div class="live-dot"></div>
                <div>
                    <div style="font-size: 0.75rem; font-weight: 600;">LIVE</div>
                    <div class="time-display" id="timeDisplay">--:--</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Globe Container -->
    <div id="globe-container"></div>

    <!-- Bottom Bar -->
    <div class="bottom-bar">
        <div class="bottom-content">
            <div class="search-container">
                <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="11" cy="11" r="8"></circle>
                    <path d="m21 21-4.35-4.35"></path>
                </svg>
                <input 
                    type="text" 
                    class="search-input" 
                    id="searchInput" 
                    placeholder="Search location or topic..."
                    autocomplete="off"
                >
                <!-- Suggestions dropdown -->
                <div id="searchSuggestions" style="
                    position: absolute;
                    top: 100%;
                    left: 0;
                    right: 0;
                    background: rgba(26, 29, 46, 0.95);
                    backdrop-filter: blur(20px);
                    border-radius: 12px;
                    margin-top: 8px;
                    display: none;
                    max-height: 300px;
                    overflow-y: auto;
                    border: 1px solid rgba(255, 255, 255, 0.1);
                    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
                    z-index: 1000;
                "></div>
            </div>

            <div class="filters-container">
                <span class="filter-label">Filter:</span>
                <!-- Emotion filters - labels will be updated by JS based on active sector -->
                <button class="filter-btn" data-emotion="joy" id="filterJoy">
                    <span class="filter-emoji">üòä</span>
                    <span class="filter-label-text">Joy</span>
                </button>
                <button class="filter-btn" data-emotion="anger" id="filterAnger">
                    <span class="filter-emoji">üò†</span>
                    <span class="filter-label-text">Anger</span>
                </button>
                <button class="filter-btn" data-emotion="sadness" id="filterSadness">
                    <span class="filter-emoji">üò¢</span>
                    <span class="filter-label-text">Sadness</span>
                </button>
                <button class="filter-btn" data-emotion="hope" id="filterHope">
                    <span class="filter-emoji">üü¢</span>
                    <span class="filter-label-text">Hope</span>
                </button>
                <button class="filter-btn" data-emotion="calmness" id="filterCalmness">
                    <span class="filter-emoji">üòå</span>
                    <span class="filter-label-text">Calm</span>
                </button>
            </div>

            <div class="hint-text">
                <span id="sectorDescription">Market Sentiment & Economic Trends</span> ‚Ä¢ 
                Drag to rotate ‚Ä¢ Scroll to zoom
            </div>
        </div>
    </div>

    <!-- Region Details Drawer -->
    <div class="region-drawer" id="regionDrawer">
        <div class="drawer-header">
            <div>
                <div class="drawer-title" id="drawerTitle">Loading...</div>
                <div class="drawer-subtitle" id="drawerSubtitle"></div>
            </div>
            <button class="close-btn" id="closeDrawer">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
        </div>

        <!-- Sector indicator in drawer -->
        <div class="drawer-sector-badge" id="drawerSectorBadge">
            <!-- Will be populated by JS -->
        </div>

        <div class="drawer-section">
            <div class="section-title">Emotion Breakdown</div>
            <div class="emotion-breakdown" id="emotionBreakdown">
                <!-- Populated by dashboard.js -->
            </div>
        </div>

        <div class="drawer-section">
            <div class="section-title">Trending Topics</div>
            <div class="keywords-container" id="keywordsContainer">
                <!-- Populated by dashboard.js -->
            </div>
        </div>

        <div class="drawer-section">
            <div class="section-title">Recent Posts</div>
            <div class="posts-container" id="postsContainer">
                <!-- Populated by dashboard.js -->
            </div>
        </div>
    </div>

    <!-- JavaScript Files -->
    <script src="{{ url_for('static', filename='js/api.js') }}"></script>
    <script src="{{ url_for('static', filename='js/globe3d.js') }}"></script>
    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
</body>
</html>